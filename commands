// Web Interface AWS
https://493330626828.signin.aws.amazon.com/console

// Instanzen launchen
source ~/development/libs/spark-1.3.0-bin-hadoop2.4/spark/bin/activate

export PEM_FILE=/home/basti/development/hpi/second_semester/dbda/text-mining.pem

~/development/spark/libs/ec2/spark-ec2 -k text-mining -i /home/basti/development/hpi/second_semester/dbda/text-mining.pem --region=eu-west-1 -s 2 --instance-type=t2.medium --copy-aws-credentials --ebs-vol-size=10 launch text-mining-big


// Master als env variable setzen
// pemfile setzen
export PEM_FILE=/home/basti/development/hpi/second_semester/dbda/text-mining.pem
export MASTER=ec2-52-18-67-153.eu-west-1.compute.amazonaws.com

// ssh auf den master
ssh -i $PEM_FILE root@$MASTER

#######################################################################
########################### SPARK #####################################
#######################################################################

// Maven installieren auf remote
wget ftp://ftp.fau.de/apache/maven/maven-3/3.0.5/binaries/apache-maven-3.0.5-bin.tar.gz
su -c "tar -zxvf apache-maven-3.0.5-bin.tar.gz -C /opt/"

// env vars setzen
export AWS_ACCESS_KEY_ID=AKIAJMOA25NEAU3EMWKQ
export AWS_SECRET_ACCESS_KEY=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
export M2_HOME=/opt/apache-maven-3.0.5;export M2=$M2_HOME/bin
export SPARK_HOME=/root/spark
export HADOOP_HOME=/root/ephemeral-hdfs
export PATH=$HADOOP_HOME/bin:$SPARK_HOME/bin:$M2:$PATH
export MASTER=ec2-52-18-67-153.eu-west-1.compute.amazonaws.com

git clone https://github.com/DBDA15/text-mining.git && cd text-mining/ && git checkout notagging

cd MainTask-spark/MainTask/ && git pull && mvn clean && mvn package

spark-submit --class de.hpi.fgis.dbda.textmining.maintask.App --master spark://$MASTER:7077 target/maintask-0.0.1-SNAPSHOT.jar hdfs://$MASTER:9000/results_text-mining s3n://dbda-text-mining/seed_tuples.tsv s3n://dbda-text-mining/data_split_tagged/nyt.1987.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1988.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1989.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1990.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1991.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1992.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1993.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1994.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1995.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1996.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1997.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1998.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1999.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2000.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2001.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2002.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2003.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2004.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2005.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2006.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2007.split_tagged

starting org.apache.spark.deploy.master.Master, logging to /root/spark/sbin/../logs/spark-root-org.apache.spark.deploy.master.Master-1-ip-172-31-37-30.eu-west-1.compute.internal.out

#######################################################################
########################### FLINK #####################################
#######################################################################

// env vars setzen
export AWS_ACCESS_KEY_ID=AKIAJMOA25NEAU3EMWKQ
export AWS_SECRET_ACCESS_KEY=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
export M2_HOME=/opt/apache-maven-3.0.5;export M2=$M2_HOME/bin
export SPARK_HOME=/root/spark
export HADOOP_HOME=/root/ephemeral-hdfs
export PATH=$HADOOP_HOME/bin:$SPARK_HOME/bin:$M2:$PATH
export MASTER=ec2-52-18-67-153.eu-west-1.compute.amazonaws.com
export FLINK_DIR=/root/flink

git clone -b ec2 https://github.com/DBDA15/hands-on.git && . hands-on/install.sh

init-flink.sh

git clone https://github.com/DBDA15/text-mining.git && cd text-mining/

cd MainTask-flink/MainTask-flink/ && git pull && mvn clean && mvn package

$HADOOP_DIR/bin/hadoop distcp s3n://dbda-text-mining/seed_tuples.tsv s3n://dbda-text-mining/data_split_tagged/nyt.1987.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1988.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1989.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1990.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1991.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1992.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1993.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1994.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1995.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1996.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1997.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1998.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1999.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2000.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2001.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2002.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2003.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2004.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2005.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2006.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2007.split_tagged hdfs://$MASTER:9000/

$FLINK_DIR/bin/flink run --parallelism 2 --class de.hpi.fgis.dbda.textmining.MainTask_flink.App -m $MASTER:6123 target/MainTask-flink-0.0.1-SNAPSHOT-flink-fat-jar.jar --windowSize 5 --minimalClusterSize 5 --degreeOfMatchThreshold 0.5 --similarityThreshold 0.5 --tupleConfidenceThreshold 0.95 --maxDistance 5 --iterations 2 --alreadyTagged --output hdfs://$MASTER:9000/results_text-mining --seedTuples s3n://dbda-text-mining/seed_tuples.tsv s3n://dbda-text-mining/data_split_tagged/nyt.1987.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1988.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1989.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1990.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1991.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1992.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1993.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1994.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1995.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1996.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1997.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1998.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.1999.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2000.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2001.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2002.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2003.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2004.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2005.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2006.split_tagged s3n://dbda-text-mining/data_split_tagged/nyt.2007.split_tagged

java.io.IOException: Channel to path '/tmp/flink-io-e4b3a9ba-800b-4543-920b-e369d1a02e73/0f51ca9458838f651ceb59571f434798.000012.channel' could not be opened.

lokal: tmp ordner Ã¤ndern

$SPARK_HOME/sbin/slaves.sh rm -fr $FLINK_DIR

$FLINK_DIR/sbi

# taskmanager.tmp.dirs: /tmp
